import code_etu
from outils_exercices.jacadi import ErreurEntréeVisible, ErreurEntréeInvisible, ExceptionEntréeVisible
from outils_exercices.jacadi import FonctionÉtuManquante
from outils_exercices.voile import VoilePudique



entrees_sorties_visibles = {{es_visibles}}
entrees_sorties_invisibles = {{es_invisibles}}

try:
    fonction_etu = code_etu.{{solution}}
except Exception as e:
    raise FonctionÉtuManquante("{{solution}}")

def test_entrees_visibles():
    for entrée, s_ens in entrees_sorties_visibles:
        def décore_exc(e_ty, e_val, e_tb):
            return ExceptionEntréeVisible(entrée, s_ens, e_ty, e_val, e_tb)
        with VoilePudique(décore_exc):
            sortie_etu = fonction_etu(*entrée)
        if sortie_etu != s_ens:
            raise ErreurEntréeVisible(entrée, sortie_etu, s_ens)

def test_entrees_invisibles():
    for e, s_ens in entrees_sorties_invisibles:
        sortie_etu = fonction_etu(*e)
        if sortie_etu != s_ens:
            raise ErreurEntréeInvisible()

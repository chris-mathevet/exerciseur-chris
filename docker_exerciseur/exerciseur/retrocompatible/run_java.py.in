from easypython_testeur import Testeurs
import sys
import json
import cbor

codeEns = """
{{classeTest}}
"""

def get_stdin():
    buf = ""
    while(True):
        line = sys.stdin.readline()
        buf += line
        if line == "":
            break
    return buf

if __name__ == "__main__":
    def erreur(*args):
         raise Exception("Langage inexistant : " + self.type)
    codeEtu = cbor.loads(get_stdin().encode("utf-8"))
    if isinstance(codeEtu, bytes):
        codeEtu = codeEtu.decode()
    testeur = Testeurs.get("{{typeExo}}", erreur)(codeEns.encode("utf-8"), codeEtu,False, nomclasse="{{nom_classe_etu}}", nom_classe_test="{{nom_classe_test}}")
    print(json.dumps(testeur.test()))
